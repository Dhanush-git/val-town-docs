---
import { getCollection } from "astro:content";

// Get all documentation
const docs = await getCollection("docs");
const markdownParts = [];

// Title
markdownParts.push("# Val Town Full Documentation\n\n");

// Add each document
for (const doc of docs) {
  markdownParts.push(`## ${doc.data.title}\n\n`);
  markdownParts.push(`URL: https://docs.val.town/md/${doc.slug}\n\n`);
  markdownParts.push(`${doc.body}\n\n---\n\n`);
}

// Add the markdown parts together
const fullContent = markdownParts.join("");

Astro.response.headers.set("Content-Type", "text/markdown; charset=utf-8");
Astro.response.headers.set("X-Robots-Tag", "noindex, nofollow");
---

{fullContent} 